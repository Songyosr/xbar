<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLT Animation Test</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: Inter, sans-serif; padding: 20px; }
        #debug { background: #f0f0f0; padding: 10px; margin: 10px 0; max-height: 200px; overflow-y: scroll; }
        button { margin: 5px; padding: 10px 15px; }
    </style>
</head>
<body>
    <h1>CLT Animation Debug Test</h1>
    
    <div id="debug"></div>
    <button onclick="testAnimation()">Test Animation</button>
    <button onclick="checkElements()">Check Elements</button>
    
    <div id="clt-app-root"></div>
    
    <script src="public/shared/clt-complete.js"></script>
    
    <script>
        function log(msg) {
            const debug = document.getElementById('debug');
            debug.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + msg + '</div>';
            debug.scrollTop = debug.scrollHeight;
            console.log(msg);
        }
        
        let cltApp = null;
        
        function testAnimation() {
            log('Testing animation...');
            
            if (!cltApp) {
                log('❌ CLT app not initialized');
                return;
            }
            
            const drawBtn = document.getElementById('draw-sample-btn');
            if (drawBtn) {
                log('✅ Draw sample button found');
                log('Clicking draw sample button...');
                drawBtn.click();
                log('Button clicked - check for animation');
            } else {
                log('❌ Draw sample button not found');
            }
        }
        
        function checkElements() {
            log('Checking elements...');
            
            const elements = [
                'draw-sample-btn',
                'repeat-10-btn', 
                'repeat-1000-btn',
                'reset-btn',
                'sample-size-slider',
                'sample-size-display'
            ];
            
            elements.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    log('✅ Found: ' + id);
                } else {
                    log('❌ Missing: ' + id);
                }
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            log('DOM loaded, initializing CLT...');
            
            try {
                if (window.CentralLimitTheoremLab) {
                    log('✅ CentralLimitTheoremLab found');
                    cltApp = window.CentralLimitTheoremLab();
                    cltApp.mount('clt-app-root');
                    log('✅ CLT App mounted');
                    
                    // Wait a bit then check elements
                    setTimeout(() => {
                        checkElements();
                    }, 1000);
                } else {
                    log('❌ CentralLimitTheoremLab not found');
                }
            } catch (error) {
                log('❌ Error: ' + error.message);
                log('Stack: ' + error.stack);
            }
        });
        
        // Capture any errors
        window.addEventListener('error', function(e) {
            log('❌ JavaScript Error: ' + e.message);
        });
    </script>
</body>
</html>